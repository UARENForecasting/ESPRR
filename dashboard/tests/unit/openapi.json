{"openapi":"3.0.2","info":{"title":"ESPRR API","description":"\nThe backend RESTful API for the Expected Solar Performance and Ramp\nRate Tool.\n\n# Introduction\n\nOn this page, you'll find documentation for the ESPRR API. The API primarily\nserves the Expected Solar Performance and Ramp Rate Tool dashboard, but power\nusers may interact with it directly. An OpenAPI generator such as\n[https://github.com/OpenAPITools/openapi-generator](https://github.com/OpenAPITools/openapi-generator)\nmay be used to generate client libraries for a number of languages to interact\nwith the API. A download link for the OpenAPI spec can be found above.\n\n# Authentication\n\nThe API is secured via OAuth 2.0 and OpenID Connect with\n[Auth0](https://auth0.com) as the identity provider. We require valid\nJSON Web Token (JWT) from Auth0 to be included as a Bearer token in\nthe Authorization header for API access. When [requesting a\ntoken](https://auth0.com/docs/api/authentication#authorization-code-flow-with-pkce46),\nthe audience must be set to `https://esprr.x.energy.arizona.edu/api`, the Client ID must be set to\n`uM1davP9zfXrUCM5KGWMcsSHcLsKbuwS`, and the token endpoint is `https://esprr.us.auth0.com/`.  Most tokens\nare set to expire in 3 hours, and Auth0 rate limits requests, so users\nare advised to reuse a token for as long as it is valid. One Python\nlibrary that can automatically refresh the tokens is\n[Authlib](https://docs.authlib.org/en/latest/client/oauth2.html#oauth2session-for-password).\n\n","version":"1","contact":{"name":"UA Power Forecasting Group","email":"atlorenzo@arizona.edu","url":"https://github.com/uarenforecasting/esprr"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"}},"paths":{"/systems/":{"get":{"tags":["PV Systems"],"summary":"List Systems","description":"List available PV systems","operationId":"list_systems_systems__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response List Systems Systems  Get","type":"array","items":{"$ref":"#/components/schemas/StoredPVSystem"}}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["PV Systems"],"summary":"Create System","description":"Create a new PV System","operationId":"create_system_systems__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PVSystem"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoredObjectID"}}},"links":{"Get System":{"operationId":"get_system_systems__system_id__get","parameters":{"system_id":"$response.body#/object_id"}},"Delete System":{"operationId":"delete_system_systems__system_id__delete","parameters":{"system_id":"$response.body#/object_id"}},"Update System":{"operationId":"update_system_systems__system_id__post","parameters":{"system_id":"$response.body#/object_id"}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"409":{"description":"Conflict"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/systems/check":{"post":{"tags":["PV Systems"],"summary":"Check System","description":"Check if the POSTed system is valid for modeling","operationId":"check_system_systems_check_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PVSystem"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/systems/{system_id}":{"get":{"tags":["PV Systems"],"summary":"Get System","description":"Get a single PV System","operationId":"get_system_systems__system_id__get","parameters":[{"description":"ID of system to get","required":true,"schema":{"title":"System Id","type":"string","description":"ID of system to get","format":"uuid","example":"6b61d9ac-2e89-11eb-be2a-4dc7a6bcd0d9"},"name":"system_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoredPVSystem"}}},"links":{"Get System":{"operationId":"get_system_systems__system_id__get","parameters":{"system_id":"$response.body#/object_id"}},"Delete System":{"operationId":"delete_system_systems__system_id__delete","parameters":{"system_id":"$response.body#/object_id"}},"Update System":{"operationId":"update_system_systems__system_id__post","parameters":{"system_id":"$response.body#/object_id"}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["PV Systems"],"summary":"Update System","description":"Update a PV System","operationId":"update_system_systems__system_id__post","parameters":[{"description":"ID of system to update","required":true,"schema":{"title":"System Id","type":"string","description":"ID of system to update","format":"uuid","example":"6b61d9ac-2e89-11eb-be2a-4dc7a6bcd0d9"},"name":"system_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PVSystem"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoredObjectID"}}},"links":{"Get System":{"operationId":"get_system_systems__system_id__get","parameters":{"system_id":"$response.body#/object_id"}},"Delete System":{"operationId":"delete_system_systems__system_id__delete","parameters":{"system_id":"$response.body#/object_id"}},"Update System":{"operationId":"update_system_systems__system_id__post","parameters":{"system_id":"$response.body#/object_id"}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]},"delete":{"tags":["PV Systems"],"summary":"Delete System","description":"Delete a PV system","operationId":"delete_system_systems__system_id__delete","parameters":[{"description":"ID of system to delete","required":true,"schema":{"title":"System Id","type":"string","description":"ID of system to delete","format":"uuid","example":"6b61d9ac-2e89-11eb-be2a-4dc7a6bcd0d9"},"name":"system_id","in":"path"}],"responses":{"204":{"description":"Successful Response"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/user/":{"get":{"tags":["User"],"summary":"Get User Info","description":"Get info about the current user","operationId":"get_user_info_user__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInfo"}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"security":[{"HTTPBearer":[]}]}}},"components":{"schemas":{"FixedTracking":{"title":"FixedTracking","required":["tilt","azimuth"],"type":"object","properties":{"tilt":{"title":"Tilt","maximum":180.0,"minimum":0.0,"type":"number","description":"Tilt of modules in degrees from horizontal"},"azimuth":{"title":"Azimuth","exclusiveMaximum":360.0,"minimum":0.0,"type":"number","description":"Azimuth of modules relative to North in degrees"}},"additionalProperties":false,"description":"Parameters for a fixed tilt array"},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"PVSystem":{"title":"PVSystem","required":["name","nw_corner","se_corner","ac_capacity","ac_dc_ratio","per_inverter_ac_capacity","tracking"],"type":"object","properties":{"name":{"title":"Name","maxLength":128,"pattern":"^(?!\\W+$)(?![_ ',\\-\\(\\)]+$)[\\w ',\\-\\(\\)]*$","type":"string","description":"Name of the system"},"nw_corner":{"title":"Nw Corner","maxItems":2,"minItems":2,"type":"array","items":{"type":"number"}},"se_corner":{"title":"Se Corner","maxItems":2,"minItems":2,"type":"array","items":{"type":"number"}},"ac_capacity":{"title":"Ac Capacity","type":"number"},"ac_dc_ratio":{"title":"Ac Dc Ratio","type":"number"},"per_inverter_ac_capacity":{"title":"Per Inverter Ac Capacity","type":"number"},"tracking":{"title":"Tracking","anyOf":[{"$ref":"#/components/schemas/FixedTracking"},{"$ref":"#/components/schemas/SingleAxisTracking"}],"description":"Parameters describing single-axis tracking or fixed mounting"}},"additionalProperties":false,"description":"Parameters for an entire PV system at some location","example":{"name":"Test PV System","nw_corner":[34.9,-112.9],"se_corner":[33.0,-111.0],"ac_capacity":10.0,"ac_dc_ratio":0.8,"per_inverter_ac_capacity":1.0,"tracking":{"tilt":20.0,"azimuth":180.0}}},"SingleAxisTracking":{"title":"SingleAxisTracking","required":["axis_tilt","axis_azimuth","gcr","backtracking"],"type":"object","properties":{"axis_tilt":{"title":"Axis Tilt","maximum":90.0,"minimum":0.0,"type":"number","description":"Tilt of tracker axis in degrees from horizontal"},"axis_azimuth":{"title":"Axis Azimiuth","exclusiveMaximum":360.0,"minimum":0.0,"type":"number","description":"Azimuth of tracker axis clockwise from North in degrees"},"gcr":{"title":"GCR","minimum":0.0,"type":"number","description":"Ground coverage ratio: ratio of module length to the spacing between trackers"},"backtracking":{"title":"Backtracking","type":"boolean","description":"True if the tracking system supports backtracking"}},"additionalProperties":false,"description":"Parameters for a single axis tracking array"},"StoredObjectID":{"title":"StoredObjectID","required":["object_id"],"type":"object","properties":{"object_id":{"title":"Object Id","type":"string","description":"Unique identifier of the object","format":"uuid"},"object_type":{"title":"Object Type","type":"string","description":"Type of the object","default":"system"}},"example":{"object_id":"6b61d9ac-2e89-11eb-be2a-4dc7a6bcd0d9","object_type":"system"}},"StoredPVSystem":{"title":"StoredPVSystem","required":["object_id","created_at","modified_at","definition"],"type":"object","properties":{"object_id":{"title":"Object Id","type":"string","description":"Unique identifier of the object","format":"uuid"},"object_type":{"title":"Object Type","type":"string","description":"Type of the object","default":"system"},"created_at":{"title":"Created At","type":"string","description":"Datetime the object was created","format":"date-time"},"modified_at":{"title":"Modified At","type":"string","description":"Datetime the object was last modified","format":"date-time"},"definition":{"$ref":"#/components/schemas/PVSystem"}},"example":{"object_id":"6b61d9ac-2e89-11eb-be2a-4dc7a6bcd0d9","object_type":"system","created_at":"2020-12-01T01:23:00+00:00","modified_at":"2020-12-01T01:23:00+00:00","definition":{"name":"Test PV System","nw_corner":[34.9,-112.9],"se_corner":[33.0,-111.0],"ac_capacity":10.0,"ac_dc_ratio":0.8,"per_inverter_ac_capacity":1.0,"tracking":{"tilt":20.0,"azimuth":180.0}}}},"UserInfo":{"title":"UserInfo","required":["object_id","created_at","modified_at","auth0_id"],"type":"object","properties":{"object_id":{"title":"Object Id","type":"string","description":"Unique identifier of the object","format":"uuid"},"object_type":{"title":"Object Type","type":"string","description":"Type of the object","default":"system"},"created_at":{"title":"Created At","type":"string","description":"Datetime the object was created","format":"date-time"},"modified_at":{"title":"Modified At","type":"string","description":"Datetime the object was last modified","format":"date-time"},"auth0_id":{"title":"Auth0 Id","type":"string","description":"User ID from Auth 0"}},"description":"Information about the current user","example":{"object_id":"6b61d9ac-2e89-11eb-be2a-4dc7a6bcd0d9","object_type":"system","created_at":"2020-12-01T01:23:00+00:00","modified_at":"2020-12-01T01:23:00+00:00"}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}},"tags":[{"name":"PV Systems","description":"Interact with PV System metadata"},{"name":"User","description":"Interact with User metadata"}],"servers":[{"url":"/api"}]}
